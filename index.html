<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulados ANAC ‚Äî C/E</title>
  <style>
    /* Branding */
.brand{display:flex;align-items:center;gap:14px;margin:0 0 10px 0}
.brand-logo{
  width:180px;
  height:64px;
  object-fit:cover;      /* corta as bordas/brancos e ‚Äúpreenche‚Äù o box */
  object-position:center;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.25)
}
.brand-name{font-size:40px;letter-spacing:.2px}
@media (max-width: 520px){
  .brand-name{font-size:32px}
  .brand-logo{width:150px;height:54px}
}

:root{
      --bg:#0b0f17; --muted:#9fb0c7; --text:#eaf0ff;
      --good:#18c37e; --bad:#ff5c7a; --line:rgba(255,255,255,.10);
      --btn:#2a3b62; --btn2:#1d2a45;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 30% 0%, #132042 0%, var(--bg) 55%);
      color:var(--text);
      font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial;
    }
    .wrap{max-width:1020px;margin:0 auto;padding:28px 18px 56px}
    header{display:flex;gap:12px;justify-content:space-between;flex-wrap:wrap;align-items:flex-start;margin-bottom:14px}
    h1{margin:0;font-size:22px}
    .sub{margin:6px 0 0;color:var(--muted);font-size:14px;max-width:720px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    select,button,input{font:inherit}
    select{
      background:var(--btn2);color:var(--text);
      border:1px solid var(--line);border-radius:12px;
      padding:10px 12px;outline:none;
    }
    button{
      background:var(--btn);color:var(--text);
      border:1px solid var(--line);border-radius:12px;
      padding:10px 12px;cursor:pointer;
    }
    button:hover{filter:brightness(1.08)}
    button:disabled{opacity:.45;cursor:not-allowed}
    .ghost{background:transparent}
    .card{
      border:1px solid var(--line);border-radius:18px;
      padding:18px;
      background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
      box-shadow:0 10px 35px rgba(0,0,0,.25);
    }
    .meta{
      display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;
      border-bottom:1px solid var(--line);padding-bottom:12px;margin-bottom:14px;
    }
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:6px 10px;border-radius:999px;border:1px solid var(--line);
      color:var(--muted);font-size:13px;background:rgba(0,0,0,.16);
    }
    .qnum{font-weight:800}
    .qtext{white-space:pre-wrap}
    .answers{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .opt{
      border:1px solid var(--line);background:rgba(0,0,0,.18);
      border-radius:14px;padding:10px 12px;cursor:pointer;user-select:none;
      display:flex;gap:10px;align-items:center;
    }
    .opt input{width:18px;height:18px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .feedback{
      margin-top:12px;padding:10px 12px;border-radius:14px;
      border:1px solid var(--line);background:rgba(0,0,0,.22);
    }
    .feedback.good{border-color:rgba(24,195,126,.35)}
    .feedback.bad{border-color:rgba(255,92,122,.35)}
    .good{color:var(--good);font-weight:800}
    .bad{color:var(--bad);font-weight:800}
    .mini{font-size:13px;color:var(--muted)}
    .review{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .chip{
      border:1px solid var(--line);background:rgba(0,0,0,.18);
      border-radius:999px;padding:6px 10px;cursor:pointer;font-size:13px;color:var(--text);
    }
    .chip:hover{filter:brightness(1.08)}
    .hide{display:none}
    .sep{height:1px;background:var(--line);margin:12px 0}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>Simulados ANAC ‚Äî C/E</h1>
      <div class="sub">
        Escolha o simulado, responda <b>Certo</b> / <b>Errado</b> e veja a corre√ß√£o.
        <br><span class="mini">Modo <b>Treino</b>: mostra gabarito na hora. Modo <b>Simulado</b>: s√≥ mostra no final. Progresso salvo automaticamente.</span>
      </div>
    </div>
    <div class="row">
      <select id="simSelect"></select>

      <select id="modeSelect" title="Modo">
        <option value="treino">Treino (corrige na hora)</option>
        <option value="simulado">Simulado (corrige no final)</option>
      </select>

      <button id="continueBtn" class="ghost">Continuar</button>
      <button id="startBtn">Come√ßar</button>
    </div>
  </header>

  <div class="card">
    <div class="meta">
      <div class="row">
        <span class="pill">üìå <span id="simTitle">Selecione um simulado</span></span>
        <span class="pill">üßæ <span id="progress">0/0</span></span>
        <span class="pill">‚úÖ <span id="score">Acertos: 0</span></span>
      </div>

      <div class="row">
        <label class="pill" style="cursor:pointer;" title="No modo Treino, voc√™ pode exigir corrigir antes de avan√ßar.">
          <input type="checkbox" id="instantCheck" checked />
          <span>Corrigir antes de avan√ßar</span>
        </label>
        <span class="pill" id="saveStatus">üíæ sem progresso salvo</span>
      </div>
    </div>

    <div id="emptyArea" class="mini">Escolha o simulado e clique em <b>Come√ßar</b>. Se voc√™ j√° estudou antes, clique em <b>Continuar</b>.</div>

    <div id="questionArea" class="hide">
      <div class="qnum" id="qNum"></div>
      <div class="qtext" id="qText"></div>

      <div class="answers">
        <label class="opt"><input type="radio" name="ans" value="C"/>Certo (C)</label>
        <label class="opt"><input type="radio" name="ans" value="E"/>Errado (E)</label>
      </div>

      <div class="actions">
        <button id="checkBtn">Corrigir</button>
        <button id="nextBtn">Pr√≥xima</button>
        <button id="finishBtn">Finalizar</button>
        <button id="restartBtn" style="margin-left:auto;">Reiniciar</button>
      </div>

      <div id="feedback" class="feedback hide"></div>
      <div class="mini" style="margin-top:10px;">Dica: seu progresso √© salvo automaticamente neste navegador.</div>
    </div>

    <div id="resultArea" class="hide">
      <h2 style="margin:0 0 8px;font-size:18px;">Resultado</h2>
      <div class="feedback" id="finalBox"></div>

      <div class="sep"></div>

      <div class="mini"><b>Erradas</b> (clique para revisar):</div>
      <div class="review" id="wrongList"></div>

      <div class="sep"></div>

      <div class="mini"><b>Em branco</b> (n√£o respondidas):</div>
      <div class="review" id="blankList"></div>
    </div>
  </div>
</div>

<script>
const DB = {"CF/ANAC 18/12": [{"n": 1, "t": "A ANAC atua em diversas √°reas, podendo-se destacar a regula√ß√£o econ√¥mica, fiscaliza√ß√£o de seguran√ßa operacional, certifica√ß√£o de aeronaves e aeroportos, forma√ß√£o e licenciamento de profissionais e o controle do espa√ßo a√©reo brasileiro.", "a": "E"}, {"n": 2, "t": "At√© o fim da d√©cada de 80, a avia√ß√£o vivia em regime de r√≠gido controle das tarifas e oferta de servi√ßos, no qual as empresas a√©reas operavam em regime de monop√≥lios, com a presen√ßa de quatro linhas a√©reas nacionais e cinco regionais.", "a": "C"}, {"n": 3, "t": "No in√≠cio dos anos 90 come√ßaram a emergir os movimentos de desregula√ß√£o da avia√ß√£o civil, que teve seu √°pice no in√≠cio dos anos 2000, com a liberdade de ofertas e liberdade tarif√°ria, bem como a cria√ß√£o do DAC, que passou a regular a avia√ß√£o no Brasil.", "a": "E"}, {"n": 4, "t": "Com a pandemia de COVID-19, v√°rios impactos foram registrados no setor de transporte a√©reo, incluindo a queda de 65,9% no tr√°fego a√©reo global em 2020, se comparado com 2019.", "a": "C"}, {"n": 5, "t": "A recupera√ß√£o do setor a√©reo no p√≥s-pandemia s√≥ come√ßou em 2023, ano em que a vacina come√ßou a ser aplicada em massa, possibilitando a flexibiliza√ß√£o das medidas contingenciais.", "a": "E"}, {"n": 6, "t": "No in√≠cio dos anos 2010 a responsabilidade por gerir e explorar todos os aeroportos brasileiros passou a ser da INFRAERO, uma vez que o regime de concess√µes n√£o obteve sucesso no setor a√©reo.", "a": "E"}, {"n": 7, "t": "De acordo com o CBAER, o sistema aeroportu√°rio √© constitu√≠do pelo conjunto de aer√≥dromos brasileiros, com as pistas de pouso, pistas de t√°xi, p√°tio de estacionamento de aeronaves, terminais de carga e passageiros e as respectivas facilidades.", "a": "C"}, {"n": 8, "t": "Aer√≥dromo √© toda √°rea destinada a pouso, decolagem e movimenta√ß√£o de aeronaves, subdividindo-se em civis e militares, sendo os civis classificados em p√∫blicos e privados.", "a": "C"}, {"n": 9, "t": "Os aer√≥dromos civis somente podem ser utilizados mediante um cadastro realizado perante a ANAC.", "a": "C"}, {"n": 10, "t": "Os aer√≥dromos privados somente podem ser utilizados para fins comerciais se houver autoriza√ß√£o formal do propriet√°rio.", "a": "E"}, {"n": 11, "t": "O DECEA, al√©m das atribui√ß√µes de defesa do espa√ßo a√©reo, tamb√©m tem a miss√£o de prover seguran√ßa e fluidez ao tr√°fego a√©reo.", "a": "C"}, {"n": 12, "t": "A ANAC tem por atribui√ß√£o institucional o trato dos diversos aspectos da seguran√ßa de voo, inclusive os n√≠veis relativos √† forma√ß√£o, ao aperfei√ßoamento e √† especializa√ß√£o do pessoal aeronavegante.", "a": "C"}, {"n": 13, "t": "A Conven√ß√£o Internacional de Avia√ß√£o Civil (CACI) foi realizada por iniciativa dos EUA, com a participa√ß√£o de 59 Estados, ap√≥s a Segunda Guerra Mundial.", "a": "E"}, {"n": 14, "t": "A raz√£o principal para que a CACI ocorresse foi que as aeronaves, antes usadas para fins militares, passaram a ser usadas para o transporte civil, fazendo-se necess√°ria uma ordena√ß√£o desse transporte.", "a": "C"}, {"n": 15, "t": "Ao final, 52 Estados assinaram a CACI, sob a condi√ß√£o de que os acordos seriam unilaterais e somente os EUA tivessem todas as liberdades do ar.", "a": "E"}, {"n": 16, "t": "O processo de negocia√ß√£o de um Acordo de Servi√ßos A√©reos ocorre atrav√©s de consultas entre as partes, chamadas de rodadas de negocia√ß√µes ou conversa√ß√µes aeron√°uticas, podendo ser na modalidade convencional ou n√£o convencional.", "a": "C"}, {"n": 17, "t": "Os documentos b√°sicos de uma consulta s√£o o ASA e o MOU, sendo o primeiro firmado entre autoridades de avia√ß√£o e o segundo entre Governos.", "a": "E"}, {"n": 18, "t": "Os Templates (TASA) s√£o modelos de uso obrigat√≥rio pelos Estados-membros da ICAO, na modalidade Bilateral, Regional e Multilateral, seguindo apenas modelos tradicionais de Acordos.", "a": "E"}, {"n": 19, "t": "O modelo de ASA adotado pelo Brasil apresenta artigos que podem ser definidos como gerais ou operacionais.", "a": "C"}, {"n": 20, "t": "O Brasil permite at√© a quinta liberdade para servi√ßos mistos e at√© a s√©tima liberdade para servi√ßos exclusivamente cargueiros.", "a": "E"}, {"n": 21, "t": "Apenas o Brasil adota capacidade livre em seus acordos, tendo todos os demais pa√≠ses adotado a capacidade restrita.", "a": "E"}, {"n": 22, "t": "A Conven√ß√£o Internacional de Avia√ß√£o Civil ocorreu em Montreal, no Canad√°, atual sede da ICAO.", "a": "E"}, {"n": 23, "t": "O mandato da ICAO √© auxiliar os pa√≠ses a alcan√ßarem o maior grau poss√≠vel de harmoniza√ß√£o e uniformidade nas regula√ß√µes e procedimentos de avia√ß√£o civil.", "a": "C"}, {"n": 24, "t": "O Conselho da ICAO √© composto por 36 pa√≠ses, eleitos a cada 2 anos pelo Secretariado, divididos em 3 grupos.", "a": "E"}, {"n": 25, "t": "O Conselho atua por meio de Comit√™s, que atuam em temas espec√≠ficos, levando ao Conselho propostas de decis√µes sobre os assuntos de que tratam.", "a": "C"}, {"n": 26, "t": "A Comiss√£o de Navega√ß√£o A√©rea, na qual o Brasil participa, √© uma esp√©cie de Comit√™ formado por 19 membros, os Comiss√°rios, que trabalham para avaliar todos os temas referentes √† Seguran√ßa Operacional (Safety).", "a": "C"}, {"n": 27, "t": "O Secretariado prop√µe os regulamentos, manuais, procedimentos e normas feitas pela OACI, contando com t√©cnicos indicados pelos pa√≠ses membros.", "a": "E"}, {"n": 28, "t": "Os regulamentos propostos pelos Pain√©is s√£o avaliados por Comit√™s e, posteriormente, levados √† aprova√ß√£o do Conselho.", "a": "C"}, {"n": 29, "t": "Os Pain√©is possuem diversos representantes da ANAC, sendo dois deles presididos por membros brasileiros.", "a": "C"}, {"n": 30, "t": "Por ser um membro do Conselho da ICAO, o Brasil possui uma delega√ß√£o permanente em Chicago, a DELBRASMONT, sendo o Assessor de Transporte A√©reo e o Secondee, chefiados pelo Minist√©rio das Rela√ß√µes Exteriores.", "a": "E"}, {"n": 31, "t": "As SARP, um dos pontos mais importantes da ICAO, servem para harmonizar as normas entre os pa√≠ses, gerar sustentabilidade ambiental, aumentar a seguran√ßa da avia√ß√£o civil e seguran√ßa contra atos de interfer√™ncia il√≠cita.", "a": "C"}, {"n": 32, "t": "A Assessoria de Rela√ß√µes Internacionais (ASINT) da Superintend√™ncia de Governan√ßa e Meio Ambiente (SGM) elabora mensalmente o Plano de Atua√ß√£o Internacional, o qual define os par√¢metros para participa√ß√£o nas miss√µes internacionais e de representa√ß√£o internacional, dando transpar√™ncia √† atua√ß√£o da Ag√™ncia.", "a": "E"}, {"n": 33, "t": "As Pol√≠ticas P√∫blicas para o setor de avia√ß√£o no Brasil ficam a cargo do MPOR, atrav√©s da SAC e do Minist√©rio da Defesa, atrav√©s do DECEA, subordinado ao COMAER.", "a": "C"}, {"n": 34, "t": "O Conselho de Avia√ß√£o Civil ‚Äì CONAC ‚Äì √© um √≥rg√£o de assessoramento do Presidente da Rep√∫blica para a formula√ß√£o da pol√≠tica de ordena√ß√£o da avia√ß√£o civil.", "a": "C"}, {"n": 35, "t": "Propor, apoiar e acompanhar as parcerias com a iniciativa privada, relativas √†s infraestruturas aeroportu√°ria e aeron√°utica civil, √© uma das compet√™ncias da SAC.", "a": "C"}, {"n": 36, "t": "Compete √† SAC assessorar o Ministro de Estado na coordena√ß√£o e na supervis√£o dos √≥rg√£os e das entidades do sistema de avia√ß√£o civil, bem como acompanhar e monitorar a aplica√ß√£o dos recursos do Fundo Nacional de Avia√ß√£o Civil para investimentos em infraestruturas aeroportu√°ria e aeron√°utica civil.", "a": "C"}, {"n": 37, "t": "A PNT orienta as a√ß√µes da SAC e a PNAC orienta as a√ß√µes de toda a avia√ß√£o civil brasileira.", "a": "C"}, {"n": 38, "t": "A promo√ß√£o da seguran√ßa, prote√ß√£o ao meio ambiente e o desenvolvimento da avia√ß√£o civil s√£o alguns dos objetivos da PNAC.", "a": "C"}, {"n": 39, "t": "A regula√ß√£o √© uma forma de interven√ß√£o estatal, com o objetivo de fazer com que o setor regulado funcione da maneira mais pr√≥xima poss√≠vel da refer√™ncia ideal.", "a": "C"}, {"n": 40, "t": "Dentre as motiva√ß√µes de natureza jur√≠dica que justificam a regula√ß√£o do setor a√©reo est√£o a prote√ß√£o a direitos como a universaliza√ß√£o de acesso, a promo√ß√£o da equidade e a exist√™ncia de externalidades e a assimetria de informa√ß√µes.", "a": "E"}, {"n": 41, "t": "A regula√ß√£o estatal da economia √© o conjunto de medidas legislativas, administrativas, convencionais, materiais ou econ√¥micas, abstratas ou concretas, pelas quais o Estado, de maneira restritiva da autonomia empresarial ou meramente indutiva, determina, controla ou influencia o comportamento dos agentes p√∫blicos.", "a": "E"}, {"n": 42, "t": "Na teoria regulat√≥ria do interesse privado, parte-se da ideia de que a regula√ß√£o surge de a√ß√µes dos indiv√≠duos ou de grupos organizados, que atuam junto aos reguladores, motivados pela maximiza√ß√£o de seus pr√≥prios interesses.", "a": "C"}, {"n": 43, "t": "O problema regulat√≥rio da captura √© a situa√ß√£o em que o regulador age em prol dos interesses de grupos privados espec√≠ficos, abandonando a busca por alcan√ßar o interesse p√∫blico.", "a": "C"}, {"n": 44, "t": "A partir da d√©cada de 1990, h√° a busca por regular de forma mais inteligente, atrav√©s da Bad Regulation, deixando de lado as discuss√µes sobre a necessidade de mais ou menos regula√ß√£o.", "a": "E"}, {"n": 45, "t": "A partir dos anos 90, o Estado brasileiro abandona a presta√ß√£o direta dos servi√ßos p√∫blicos em diversos setores, concedendo a opera√ß√£o √†s empresas privadas.", "a": "C"}, {"n": 46, "t": "A Lei de Liberdade Econ√¥mica estabelece normas de prote√ß√£o √† livre iniciativa e ao livre exerc√≠cio de atividade econ√¥mica e disposi√ß√µes sobre a atua√ß√£o do Estado como agente normativo e regulador.", "a": "C"}, {"n": 47, "t": "A opera√ß√£o dos aeroportos no Brasil √© realizada por entes privados (atrav√©s de concess√µes p√∫blicas), pela Infraero (empresa p√∫blica), por estados ou munic√≠pios.", "a": "C"}, {"n": 48, "t": "Os servi√ßos a√©reos s√£o considerados atividades econ√¥micas de interesse privado, mas constituem um neg√≥cio de natureza p√∫blica.", "a": "E"}, {"n": 49, "t": "O sistema hub-and-spoke traz um efeito multiplicador para a conectividade da malha a√©rea, embora esse sistema possua algumas dificuldades associadas, como atrasos por congestionamentos nos hubs e necessidade de estrutura compat√≠vel com os hor√°rios de pico.", "a": "C"}, {"n": 50, "t": "As empresas a√©reas possuem liberdade para escolherem as rotas em que v√£o operar e para definir os pre√ßos que ser√£o praticados, sem que seja necess√°rio registrar, junto √† ANAC, os voos que planeja realizar.", "a": "E"}, {"n": 51, "t": "As companhias a√©reas de baixo custo, ou low cost, costumam operar em aeroportos principais para poder aproveitar ao m√°ximo a conectividade dos voos e gerar ganho de receitas com a grande movimenta√ß√£o de passageiros.", "a": "E"}, {"n": 52, "t": "Companhias a√©reas regionais focam em voos de curta dist√¢ncia, muitas vezes operando como parceiros de companhias a√©reas maiores, conectando passageiros de cidades menores a hubs maiores e combinam elementos de diferentes modelos de neg√≥cios, com caracter√≠sticas de companhias de baixo custo e de servi√ßo completo.", "a": "E"}, {"n": 53, "t": "O controle econ√¥mico das empresas a√©reas no Brasil pode ser feito com at√© 20% de capital estrangeiro, visando garantir a maior participa√ß√£o do capital nacional.", "a": "E"}, {"n": 54, "t": "Assim como na Nova Zel√¢ndia, no Brasil a medicina de avia√ß√£o √© uma especializa√ß√£o dentro da medicina ocupacional ou medicina do trabalho, sob as regras das NR‚Äôs elaboradas pelo Minist√©rio do Trabalho e Emprego.", "a": "E"}, {"n": 55, "t": "A medicina ocupacional no Brasil se relaciona com o MTE, enquanto que a medicina na avia√ß√£o fica a cargo da ANAC.", "a": "C"}, {"n": 56, "t": "O barotrauma adv√©m de eventos decorrentes da baixa press√£o atmosf√©rica em que os gases no interior do corpo humano se expandem e podem causar traumas ou dor intensa, levando √† incapacita√ß√£o s√∫bita em voo.", "a": "C"}, {"n": 57, "t": "Barossinusite √© a dor que ocorre na testa ou na regi√£o ao redor do nariz, por causa do trauma decorrente do aumento de volume do g√°s aprisionado em um ou mais seios paranasais, o que ocorre geralmente na fase de aproxima√ß√£o e pouso.", "a": "E"}, {"n": 58, "t": "O sistema vestibular √© comandado pelo labirinto, √≥rg√£o respons√°vel pelo equil√≠brio, que fica na orelha externa e apresenta diversas estruturas denominadas s√°culo, utr√≠culo e os canais semicirculares, que detectam a acelera√ß√£o linea e a acelera√ß√£o angular do corpo e da cabe√ßa.", "a": "E"}, {"n": 59, "t": "Mergulhadores que praticam mergulho do tipo SCUBA Diving costumam sofrer do est√°gio I da doen√ßa descompressiva, caracterizada por fortes dores de cabe√ßa e altera√ß√µes visuais.", "a": "E"}, {"n": 60, "t": "Ap√≥s procedimento cir√∫rgico para retirada de parte do pulm√£o ou ap√≥s pneumot√≥rax √© indicado esperar pelo menos 14 dias antes de voar.", "a": "E"}, {"n": 61, "t": "Autocinesi √© a ilus√£o visual de deslocamento de ponto luminoso sobre um fundo escuro, principalmente quando h√° outras refer√™ncias luminosas.", "a": "E"}, {"n": 62, "t": "O ru√≠do √© uma condi√ß√£o ambiental comum na atividade a√©rea pela presen√ßa do sistema motopropulsor da aeronave e, al√©m do dano a longo prazo, pode causar incapacita√ß√£o s√∫bita no piloto e levar √† perda de controle da aeronave.", "a": "E"}], "CF/ANAC 19/12": [{"n": 1, "t": "Economia da regula√ß√£o √© o campo da economia que estuda ‚Äúcomo‚Äù e ‚Äúpor que‚Äù os governos interv√™m em mercados e setores espec√≠ficos para corrigir falhas de mercado, promover justi√ßa e melhorar a efici√™ncia econ√¥mica.", "a": "C"}, {"n": 2, "t": "A fun√ß√£o da regula√ß√£o econ√¥mica √© promover o interesse p√∫blico, viabilizando os investimentos p√∫blicos e garantindo o bem-estar dos consumidores por meio da disponibilidade e qualidade dos servi√ßos, em condi√ß√µes adequadas de pre√ßo.", "a": "E"}, {"n": 3, "t": "S√£o exemplos de falhas de governo os monop√≥lios; oligop√≥lios; externalidades, que s√£o efeitos colaterais das atividades econ√¥micas que afetam terceiros; bens p√∫blicos e informa√ß√£o assim√©trica.", "a": "E"}, {"n": 4, "t": "As denominadas falhas de governo ocorrem devido √†s limita√ß√µes de informa√ß√£o, aos interesses conflitantes e √†s restri√ß√µes pol√≠ticas.", "a": "C"}, {"n": 5, "t": "Em um mercado livre e competitivo, o pre√ßo de um bem tende a ser determinado pelo equil√≠brio entre a oferta e a demanda.", "a": "C"}, {"n": 6, "t": "A rivalidade √© um fator que ocorre exclusivamente entre produtores que desejam vender seus produtos ou servi√ßos de mesma classe.", "a": "E"}, {"n": 7, "t": "No que diz respeito a modelos de neg√≥cio, as empresas brasileiras predominantes apresentam caracter√≠sticas de modelos tradicionais, com uso de hubs, programas de fidelidade, amenidades de voo, e de baixo custo, com cobran√ßa de servi√ßos adicionais, como assentos e bagagem despachada, e em alguns casos espec√≠ficos similaridade de frota e uso de aeroportos secund√°rios.", "a": "C"}, {"n": 8, "t": "Mesmo com suas peculiaridades, como grande necessidade de capital e economias de escala, √© proibido haver oligop√≥lios, duop√≥lios ou monop√≥lios atuando no setor a√©reo.", "a": "E"}, {"n": 9, "t": "√â defeso √† ANAC, por aus√™ncia de compet√™ncia legal, julgar ou aplicar qualquer tipo de san√ß√£o em fun√ß√£o de supostas condutas anticompetitivas ou infra√ß√µes contra a ordem econ√¥mica, devendo, caso identifique fato que configure ou possa configurar conduta anticompetitiva, encaminhar o caso para an√°lise do CADE.", "a": "C"}, {"n": 10, "t": "S√£o benef√≠cios diretos trazidos pela concorr√™ncia a redu√ß√£o de pre√ßos, a melhoria na qualidade do servi√ßo e a forma√ß√£o de monop√≥lios regionais.", "a": "E"}, {"n": 11, "t": "Os maiores custos das companhias a√©reas s√£o relacionados a combust√≠veis e lubrificantes, que por sua vez, possuem pre√ßos sempre fixos devido √†s opera√ß√µes de hedge.", "a": "E"}, {"n": 12, "t": "O gerenciamento de receitas (Revenue management - RM) √© a t√©cnica que as empresas a√©reas utilizam para gerenciar as vendas de assentos e a demanda de passagens pelos passageiros em busca de maior rentabilidade.", "a": "C"}, {"n": 13, "t": "A elasticidade-pre√ßo da demanda indica a sensibilidade do consumidor a varia√ß√µes no pre√ßo, como no caso dos viajantes a lazer, que seriam menos sens√≠veis a pre√ßo e teriam maior flexibilidade no planejamento de suas viagens.", "a": "E"}, {"n": 14, "t": "S√£o distintas as situa√ß√µes de overbooking e preteri√ß√£o de embarque, uma vez que esta ocorre por venda de bilhetes al√©m da capacidade da aeronave e aquela por outros fatores, como troca de aeronave por modelo de menor capacidade.", "a": "E"}, {"n": 15, "t": "O Yield √© uma vari√°vel que considera o pre√ßo pago da tarifa por km rodado.", "a": "C"}, {"n": 16, "t": "De acordo com a teoria econ√¥mica da regula√ß√£o, interven√ß√µes estatais somente devem ser aplicadas quando constatada uma falha de mercado e, em casos muito espec√≠ficos, sob risco de representar uma falha de governo.", "a": "C"}, {"n": 17, "t": "As principais tem√°ticas tratadas na ANAC s√£o safety (seguran√ßa operacional), security (AVSEC), regula√ß√£o econ√¥mica de aeroportos e acompanhamento do mercado de transporte a√©reo, sendo os dois primeiros regula√ß√£o econ√¥mica e os dois √∫ltimos s√£o regula√ß√£o t√©cnica.", "a": "E"}, {"n": 18, "t": "No que tange √† regula√ß√£o econ√¥mica, cabe √† ANAC monitorar e acompanhar o mercado, de forma a avaliar oportunidades de redu√ß√£o de entraves institucionais √† promo√ß√£o de mais concorr√™ncia, bem como punir eventuais desvios por parte dos operadores a√©reos.", "a": "E"}, {"n": 19, "t": "A Agenda Regulat√≥ria da ANAC √© um planejamento que promove a transpar√™ncia e a participa√ß√£o da sociedade em rela√ß√£o aos temas priorit√°rios para atua√ß√£o da Ag√™ncia, no que diz respeito ao desenvolvimento e atualiza√ß√£o de normas do setor.", "a": "C"}, {"n": 20, "t": "Somente √© permitido √†s empresas a√©reas venderem seus servi√ßos na modalidade unbundling, de forma que qualquer servi√ßo acess√≥rio deve ser comercializado separado da tarifa da passagem a√©rea, como servi√ßos de despacho de bagagem e marca√ß√£o de assentos.", "a": "E"}, {"n": 21, "t": "Apenas a Administra√ß√£o P√∫blica Direta tem compet√™ncia para estabelecer regramentos que se reconduzem √† atividade regulat√≥ria, atrav√©s das Ag√™ncias Reguladoras.", "a": "E"}, {"n": 22, "t": "Tal qual na pr√°tica legislativa e administrativa ordin√°rias, atividade regulat√≥ria √© orientada pela busca de resultados eficientes, que compreendam o caso concreto e se atentam aos efeitos sin√©rgicos das decis√µes.", "a": "E"}, {"n": 23, "t": "Minimizar custos e distor√ß√µes de mercado, promover inova√ß√µes e compatibilizar-se com princ√≠pios que promovam o com√©rcio e o investimento s√£o aspectos da boa regula√ß√£o, conforme a OCDE.", "a": "C"}, {"n": 24, "t": "A Avalia√ß√£o de Impacto Regulat√≥rio (AIR) √© a ferramenta elementar de qualidade regulat√≥ria, a qual compreende as dimens√µes antecedente e consequente quanto √† elabora√ß√£o e monitoramento de normas.", "a": "C"}, {"n": 25, "t": "A AIR somente √© obrigat√≥ria quando o √≥rg√£o regulador precisa avaliar os custos monet√°rios da implementa√ß√£o da norma, sendo dispensada nos demais casos.", "a": "E"}, {"n": 26, "t": "A Lei n¬∫ 13.848/2019, conhecida como a Lei das Ag√™ncias, obriga a realiza√ß√£o de consulta p√∫blica no processo regulat√≥rio, pois o √≥rg√£o regulador n√£o det√©m a t√©cnica e o conhecimento absolutos sobre o tema a ser tratado.", "a": "C"}, {"n": 27, "t": "A ARR fecha e recome√ßa o ciclo regulat√≥rio, pois √© a partir de seus resultados que ser√° analisada a necessidade de revis√£o, adequa√ß√£o, revoga√ß√£o ou manuten√ß√£o da regula√ß√£o vigente.", "a": "C"}, {"n": 28, "t": "A Agenda Regulat√≥ria √© o instrumento de planejamento das ag√™ncias reguladoras, com vig√™ncia anual, por meio da qual a ag√™ncia planeja a atua√ß√£o em √°reas com maior necessidade de apoio regulat√≥rio.", "a": "E"}, {"n": 29, "t": "A regula√ß√£o pode-se dizer que √© uma ferramenta de indu√ß√£o de comportamento, em que o regulador induz o ente regulado a agir de acordo com o interesse p√∫blico, ora utilizando mecanismos mais prescritivos, ora utilizando t√©cnicas de indu√ß√£o de comportamento.", "a": "C"}, {"n": 30, "t": "O regulador deve avaliar qual abordagem utilizar, de acordo com o hist√≥rico de comportamento do ente regulado, sempre dando prefer√™ncia para utilizar a abordagem de hard regulation, que √© a mais importante devido ao seu car√°ter prescritivo.", "a": "E"}, {"n": 31, "t": "Atrav√©s de parcerias realizadas com outras entidades, como o PPRR, realizado junta √† UNB, a ANAC vem buscando inovar a sua abordagem regulat√≥ria, passando a incluir os entes regulados no processo regulat√≥rio, aproximando as entidades privadas das entidades p√∫blicas.", "a": "C"}, {"n": 32, "t": "√â incontroverso afirmar que a regula√ß√£o pelo contrato √© amplamente utilizada pela ANAC nas concess√µes de aeroportos.", "a": "C"}, {"n": 33, "t": "A Administra√ß√£o Consensual √© uma ferramenta regulat√≥ria estrita, na qual a Administra√ß√£o passa a ter um papel de mediadora, n√£o executando atos de imposi√ß√£o, mas permitindo a colabora√ß√£o dos indiv√≠duos na busca pela resolu√ß√£o consensual de situa√ß√µes-problema.", "a": "E"}, {"n": 34, "t": "Tomar a√ß√µes diretas sobre o mercado √© uma forma de regula√ß√£o, na qual o Estado insere-se no ambiente regulado, n√£o com o poder normativo, mas tamb√©m como um executor.", "a": "C"}, {"n": 35, "t": "Na escolha por qual instrumento regulat√≥rio se aplica melhor a cada caso, pode-se seguir uma sequ√™ncia de cinco princ√≠pios, que definem a (1) utiliza√ß√£o de um pacote de mecanismos que se completem, (2) optando por medidas menos interventivas, (3) utilizando instrumentos mais brandos, (4) incluindo e empoderando os participantes do mercado e (5) buscando por solu√ß√µes ganha-ganha, alinhados a objetivos comuns.", "a": "C"}, {"n": 36, "t": "O conceito de Enforcement remete ao monitoramento por parte dos reguladores, que devem agir com foco exclusivo na detec√ß√£o e puni√ß√£o de desrespeito √†s normas.", "a": "E"}, {"n": 37, "t": "As a√ß√µes de enforcement envolvem os procedimentos relacionados √† detec√ß√£o e puni√ß√£o de desrespeito √†s normas regulamentares, enquanto compliance refere-se ao treinamento e conscientiza√ß√£o, √†s advert√™ncias, persuas√£o e negocia√ß√£o.", "a": "E"}, {"n": 38, "t": "Compliance refere-se √† disposi√ß√£o dos entes regulados em aderir √†s normas e √†s boas pr√°ticas de regula√ß√£o.", "a": "C"}, {"n": 39, "t": "Do ponto de vista organizacional, as atividades de fiscaliza√ß√£o recebem tratamento estrat√©gico, sendo parte do macroprocesso da ANAC sob o t√≠tulo: ‚ÄúGerir o arcabou√ßo regulat√≥rio e promover o acesso a mercados internacionais‚Äù.", "a": "E"}, {"n": 40, "t": "A Lei Geral das Ag√™ncias materializou mecanismos de governan√ßa regulat√≥ria, atribuindo √†s ag√™ncias reguladoras diversas obriga√ß√µes e procedimentos voltados a ampliar a transpar√™ncia e participa√ß√£o, fortalecer a avalia√ß√£o pr√©via das regulamenta√ß√µes e aprimorar o processo decis√≥rio.", "a": "C"}, {"n": 41, "t": "A AIR √© uma etapa obrigat√≥ria do ciclo normativo para atos de interesse geral dos agentes econ√¥micos, consumidores ou usu√°rios dos servi√ßos prestados, com obrigatoriedade, inclusive, de realiza√ß√£o de consulta p√∫blica, n√£o sendo obrigat√≥rio, no entanto, que a AIR em si seja disponibilizada para a sociedade.", "a": "E"}, {"n": 42, "t": "A IN 154 trata apenas das etapas 1 a 4 do ciclo normativo, que s√£o a AIR, o Desenvolvimento da proposta, a Consulta P√∫blica e a Delibera√ß√£o final.", "a": "C"}, {"n": 43, "t": "O ciclo normativo come√ßa com a AIR e termina com a ARR, que servir√° de base para o recome√ßo do ciclo.", "a": "C"}, {"n": 44, "t": "A AIR √© um instrumento de apoio √† decis√£o da autoridade competente, mas n√£o deve ser usada como ferramenta de roteiriza√ß√£o para a constru√ß√£o da solu√ß√£o t√©cnica.", "a": "E"}, {"n": 45, "t": "A AIR √© a primeira etapa do ciclo regulat√≥rio, sendo o primeiro passo dessa etapa a proposi√ß√£o de poss√≠veis alternativas para a solu√ß√£o do problema regulat√≥rio.", "a": "E"}, {"n": 46, "t": "Dentre as metodologias utilizadas para avaliar as alternativas propostas durante a realiza√ß√£o de AIR, est√£o a An√°lise de custo, An√°lise Multicrit√©rio e An√°lise de Custo- benef√≠cio.", "a": "C"}, {"n": 47, "t": "A An√°lise de Resultado Regulat√≥rio √© utilizada para medir os impactos de uma regulamenta√ß√£o antes de sua implementa√ß√£o.", "a": "E"}, {"n": 48, "t": "As ARR podem ser divididas em tr√™s tipos distintos: avalia√ß√£o de processo, avalia√ß√£o de impacto e avalia√ß√£o econ√¥mica, devendo o regulador focar sua abordagem em apenas um tipo de avalia√ß√£o para cada norma a ser analisada.", "a": "E"}, {"n": 49, "t": "As 4 principais categorias referentes √† Participa√ß√£o Social s√£o Constru√ß√£o, Compartilhamento, Coleta e Cr√≠tica.", "a": "C"}, {"n": 50, "t": "S√£o incumb√™ncias da ANAC regular, autorizar, aprovar, conceder e fiscalizar produtos, aeronaves, servi√ßos a√©reos, operadores a√©reos, organiza√ß√µes de instru√ß√£o, manuten√ß√£o, entre outros.", "a": "C"}, {"n": 51, "t": "A certifica√ß√£o tem como objetivo atestar o grau de confian√ßa e o atendimento a requisitos estabelecidos em regulamentos internacionais de avia√ß√£o.", "a": "C"}, {"n": 52, "t": "Tanto as superintend√™ncias final√≠sticas, quantos as que desempenham atividades- meio realizam atividades de certifica√ß√£o, como a Superintend√™ncia de Tecnologia da Informa√ß√£o, que certifica computadores para o uso nas unidades da Ag√™ncia.", "a": "E"}, {"n": 53, "t": "As atividades de certifica√ß√£o e fiscaliza√ß√£o da ANAC constituem o que a ICAO chama de \"Oversight Function\", que se traduz como supervisionar.", "a": "C"}, {"n": 54, "t": "O processo de certifica√ß√£o da ANAC, de modo geral, √© composto por 5 fases e ser√° conclu√≠do independente de haverem ou n√£o pend√™ncias em qualquer de suas etapas.", "a": "E"}, {"n": 55, "t": "As etapas do processo de certifica√ß√£o na ANAC, de modo geral, s√£o a Solicita√ß√£o Pr√©via, a Solicita√ß√£o Formal, a Avalia√ß√£o de Documentos, Demonstra√ß√µes e Inspe√ß√µes e a fase de Certifica√ß√£o.", "a": "C"}, {"n": 56, "t": "A metodologia de Fiscaliza√ß√£o Baseada em Risco √© prevista pelo PSOE-ANAC e pelo CENIPA, √≥rg√£o ao qual a SFI √© subordinada.", "a": "E"}, {"n": 57, "t": "A dura√ß√£o padr√£o do ciclo de fiscaliza√ß√£o √© definida em fun√ß√£o do perfil de risco do regulado, devendo cada ciclo ter a mesma dura√ß√£o para todos os tipos de perfis.", "a": "E"}, {"n": 58, "t": "O desempenho de seguran√ßa de um regulado muda continuamente ao longo do tempo, j√° o perfil de risco se mant√©m sempre o mesmo.", "a": "E"}, {"n": 59, "t": "Conforme suas compet√™ncias, cada UDVD regula e fiscaliza atividades da avia√ß√£o civil, estabelece o perfil de risco dos regulados e o respectivo agrupamento, bem como os indicadores que ser√£o utilizados para monitorar o desempenho de seguran√ßa operacional.", "a": "C"}, {"n": 60, "t": "O perfil de risco serve de base para a defini√ß√£o das atividades de fiscaliza√ß√£o e de seu intervalo, enquanto que o desempenho de seguran√ßa permite a customiza√ß√£o das atividades, que √© um dos principais componentes da Fiscaliza√ß√£o Baseada em Risco.", "a": "C"}, {"n": 61, "t": "A customiza√ß√£o das atividades somente levar√° em conta as caracter√≠sticas do regulado, independente de outros fatores externos.", "a": "E"}, {"n": 62, "t": "Na Fiscaliza√ß√£o Baseada em Risco, uma das maneiras de se avaliar o n√≠vel de desempenho de seguran√ßa de uma organiza√ß√£o √© pela an√°lise de seu SGSO.", "a": "C"}, {"n": 63, "t": "O ciclo da fiscaliza√ß√£o baseada em risco come√ßa com a an√°lise do perfil de risco do regulado e termina com a intera√ß√£o entre os gestores dos regulados.", "a": "C"}, {"n": 64, "t": "Compete √† ANAC regular e fiscalizar as atividades de avia√ß√£o civil e de infraestrutura aeron√°utica e aeroportu√°ria, inclusive aquelas que tratam dos sistemas de controle do espa√ßo a√©reo e de investiga√ß√£o e preven√ß√£o de acidentes aeron√°uticos.", "a": "E"}, {"n": 65, "t": "A aus√™ncia de subordina√ß√£o hier√°rquica a outros √≥rg√£os da estrutura do Governo √© um dos atributos conferidos √†s ag√™ncias reguladoras pelo legislativo, a fim de que elas tenham independ√™ncia para atuar de acordo com seu car√°ter t√©cnico.", "a": "C"}, {"n": 66, "t": "O poder de pol√≠cia administrativa da ANAC se manifesta atrav√©s da possibilidade de restringir liberdades individuais, sempre com vistas ao interesse p√∫blico e seguran√ßa das opera√ß√µes a√©reas.", "a": "C"}, {"n": 67, "t": "O ato de fiscalizar deve ser dividido em duas frentes: a de evitar transgress√µes e a de punir as transgress√µes.", "a": "C"}, {"n": 68, "t": "A fiscaliza√ß√£o deve ser planejada para trazer benef√≠cios positivos ao sistema de avia√ß√£o e deve ter car√°ter arrecadat√≥rio, para gerar receita aos cofres p√∫blicos.", "a": "E"}, {"n": 69, "t": "O conceito de Regula√ß√£o compreende tr√™s elementos fundamentais, os quais s√£o a Regulamenta√ß√£o, a Certifica√ß√£o e a Fiscaliza√ß√£o.", "a": "C"}, {"n": 70, "t": "A ANAC exerce a regula√ß√£o nas √°reas T√©cnica e Econ√¥mica, sendo a primeira ligada √†s quest√µes de safety e security e a segunda diz respeito aos procedimentos que incentivam a efici√™ncia e concorr√™ncia nos aeroportos e no transporte a√©reo.", "a": "C"}, {"n": 71, "t": "A fiscaliza√ß√£o na ANAC pode ser realizada somente pela SFI atrav√©s da A√ß√£o Fiscal e da Vigil√¢ncia Continuada.", "a": "E"}, {"n": 72, "t": "Dentre as sete superintend√™ncias final√≠sticas da ANAC, apenas a SFI tem como atribui√ß√£o prim√°ria a realiza√ß√£o de a√ß√£o fiscal e intelig√™ncia, restringindo-se a essas atividades.", "a": "E"}, {"n": 73, "t": "No modelo de fiscaliza√ß√£o descentralizado, as superintend√™ncias final√≠sticas da ANAC podem contar com a for√ßa de trabalho da SFI para executar seus planos de fiscaliza√ß√£o, atuando nas atividades de Vigil√¢ncia Continuada.", "a": "C"}, {"n": 74, "t": "O Comp√™ndio de Elementos de Fiscaliza√ß√£o ‚Äì CEF √© uma ferramenta de gest√£o da fiscaliza√ß√£o, a qual serve como um guia orientativo para o agente da fiscaliza√ß√£o.", "a": "C"}, {"n": 75, "t": "De acordo com a Instru√ß√£o Normativa 101/2016, apenas os Especialistas em Regula√ß√£o de Avia√ß√£o Civil, T√©cnicos em Regula√ß√£o de Avia√ß√£o Civil, os ocupantes de cargos comissionados e os servidores do Quadro de Pessoal Espec√≠fico podem realizar atividades de fiscaliza√ß√£o.", "a": "C"}, {"n": 76, "t": "As atividades de lavratura de auto de infra√ß√£o; suspens√£o cautelar de certificados, licen√ßas, concess√µes ou autoriza√ß√µes; deten√ß√£o, interdi√ß√£o ou apreens√£o de aeronave, ou do material transportado s√£o consideradas atividades de apoio √† fiscaliza√ß√£o, podendo ser realizadas por qualquer servidor da ANAC.", "a": "E"}, {"n": 77, "t": "Todos os servidores lotados na Ag√™ncia podem participar de atividades de fiscaliza√ß√£o, mas apenas os Especialistas podem adotar provid√™ncias administrativas, cabendo aos outros servidores participar em atividades acess√≥rias, que incluem o apoio t√©cnico e a coleta de informa√ß√µes.", "a": "E"}, {"n": 78, "t": "As atividades acess√≥rias da fiscaliza√ß√£o incluem o apoio t√©cnico e a coleta de informa√ß√µes, bem como a lavratura do auto de infra√ß√£o, que subsidiar√° o processo de apura√ß√£o do processo sancionat√≥rio.", "a": "E"}, {"n": 79, "t": "A pir√¢mide regulat√≥ria √© dividida em medidas preventivas (ACI e SRCI), sancionat√≥rias (multa, suspens√£o e cassa√ß√£o) e acautelat√≥rias (deten√ß√£o, suspens√£o, apreens√£o), que s√£o aplicadas quando h√° risco iminente.", "a": "C"}, {"n": 80, "t": "A SRCI se distingue do ACI pelo fato de exigir do regulado um prazo para a corre√ß√£o de conduta, o qual pode ser determinado pela ANAC ou ser sugerido pelo regulado, por meio de um Plano de A√ß√£o Corretiva (PAC), o qual tem de ser aprovado pela Ag√™ncia, com a obrigatoriedade de o regulado comprovar a corre√ß√£o da conduta dentro do prazo ‚Äúpactuado‚Äù.", "a": "C"}, {"n": 81, "t": "Caso o regulado descumpra o TCC, ou seja, repita a pr√°tica irregular em at√© dois anos da assinatura do termo, ser√° adotada nova medida cautelar e instaurado processo administrativo sancionador, com sugest√£o de cassa√ß√£o ou suspens√£o punitiva.", "a": "C"}, {"n": 82, "t": "A aplica√ß√£o de uma provid√™ncia prevista j√° √© suficiente e n√£o poder√° ser adotada outra medida para a coer√ß√£o da pr√°tica infracional do regulado.", "a": "E"}, {"n": 83, "t": "A execu√ß√£o e coleta de dados da atividade de fiscaliza√ß√£o deve ser padronizada com base nos Elementos de Fiscaliza√ß√£o, e as condutas observadas devem ser orientadas e corrigidas utilizando as provid√™ncias administrativas previstas.", "a": "C"}]};

const simSelect = document.getElementById('simSelect');
const modeSelect = document.getElementById('modeSelect');
const startBtn = document.getElementById('startBtn');
const continueBtn = document.getElementById('continueBtn');

const simTitle = document.getElementById('simTitle');
const progress = document.getElementById('progress');
const scoreEl = document.getElementById('score');
const instantCheck = document.getElementById('instantCheck');
const saveStatus = document.getElementById('saveStatus');

const emptyArea = document.getElementById('emptyArea');
const questionArea = document.getElementById('questionArea');
const resultArea = document.getElementById('resultArea');

const qNum = document.getElementById('qNum');
const qText = document.getElementById('qText');

const checkBtn = document.getElementById('checkBtn');
const nextBtn = document.getElementById('nextBtn');
const finishBtn = document.getElementById('finishBtn');
const restartBtn = document.getElementById('restartBtn');
const feedback = document.getElementById('feedback');

const finalBox = document.getElementById('finalBox');
const wrongList = document.getElementById('wrongList');
const blankList = document.getElementById('blankList');

let simKey=null;
let questions=[];
let idx=0;
let answered=new Map(); // n -> {marked:"C"|"E", checked:bool}
let mode="treino"; // treino|simulado

function storageKey(k){ return "anac_simulados_v2::" + k; }
function nowISO(){ return new Date().toISOString(); }

function initSelect(){
  simSelect.innerHTML="";
  Object.keys(DB).forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k;
    opt.textContent = k + ` (${DB[k].length} quest√µes)`;
    simSelect.appendChild(opt);
  });
}
initSelect();

function loadState(k){
  try{
    const raw = localStorage.getItem(storageKey(k));
    if(!raw) return null;
    return JSON.parse(raw);
  } catch(e){ return null; }
}

function updateSaveStatus(){
  const st = loadState(simSelect.value);
  if(st && st.savedAt){
    const dt = new Date(st.savedAt);
    saveStatus.textContent = "üíæ salvo em " + dt.toLocaleString();
    continueBtn.disabled = false;
  } else {
    saveStatus.textContent = "üíæ sem progresso salvo";
    continueBtn.disabled = true;
  }
}

function saveState(){
  if(!simKey) return;
  const obj = {
    simKey,
    idx,
    mode,
    instant: !!instantCheck.checked,
    answered: Array.from(answered.entries()),
    savedAt: nowISO(),
  };
  try{
    localStorage.setItem(storageKey(simKey), JSON.stringify(obj));
  }catch(e){}
  updateSaveStatus();
}

function clearRadios(){
  document.querySelectorAll('input[name="ans"]').forEach(r=>r.checked=false);
}
function getMarked(){
  const r=document.querySelector('input[name="ans"]:checked');
  return r ? r.value : null;
}
function getCorrectCount(){
  let c=0;
  for(const q of questions){
    const rec = answered.get(q.n);
    if(rec && rec.marked && rec.marked === q.a) c++;
  }
  return c;
}

function updateMeta(){
  simTitle.textContent = simKey || "Selecione um simulado";
  progress.textContent = simKey ? `${Math.min(idx+1, questions.length)}/${questions.length}` : "0/0";
  const score = simKey ? getCorrectCount() : 0;
  scoreEl.textContent = `Acertos: ${score}`;
}

function isCurrentChecked(){
  const q=questions[idx];
  const rec=answered.get(q.n);
  return !!(rec && rec.checked);
}

function setButtons(){
  if(!simKey) return;
  const isLast = (idx === questions.length-1);

  if(mode === "simulado"){
    instantCheck.disabled = true;
    checkBtn.disabled = true;
    nextBtn.disabled = false;
    nextBtn.textContent = isLast ? "Terminar" : "Pr√≥xima";
    feedback.classList.add('hide');
    return;
  }

  instantCheck.disabled = false;
  checkBtn.disabled = isCurrentChecked();
  nextBtn.disabled = instantCheck.checked ? !isCurrentChecked() : false;
  nextBtn.textContent = isLast ? "Terminar" : "Pr√≥xima";
}

function showFeedback(){
  if(mode === "simulado"){
    feedback.classList.add('hide');
    return;
  }
  const q=questions[idx];
  const rec=answered.get(q.n);
  if(!rec || !rec.checked){
    feedback.classList.add('hide');
    return;
  }
  const marked = rec.marked;
  const correct = (marked === q.a);

  feedback.classList.remove('hide');
  feedback.classList.toggle('good', correct===true);
  feedback.classList.toggle('bad', correct===false);

  const label = correct ? "‚úÖ Correto" : "‚ùå Errado";
  const correctTxt = q.a==="C" ? "Certo (C)" : "Errado (E)";
  const markedTxt  = marked==="C" ? "Certo (C)" : "Errado (E)";
  feedback.innerHTML = `
    <div><span class="${correct ? "good":"bad"}">${label}</span> ‚Äî voc√™ marcou <b>${markedTxt}</b>. Gabarito: <b>${correctTxt}</b>.</div>
    <div class="mini" style="margin-top:6px;">Voc√™ pode mudar a resposta: marque a outra op√ß√£o e clique em Corrigir de novo.</div>
  `;
}

function render(){
  const q=questions[idx];
  qNum.textContent = `Quest√£o ${q.n}`;
  qText.textContent = q.t;

  clearRadios();
  const rec=answered.get(q.n);
  if(rec && rec.marked){
    const el=document.querySelector(`input[name="ans"][value="${rec.marked}"]`);
    if(el) el.checked=true;
  }

  updateMeta();
  setButtons();
  showFeedback();
}

function startFresh(){
  simKey = simSelect.value;
  questions = DB[simKey].slice();
  idx=0;
  answered=new Map();
  mode = modeSelect.value;

  emptyArea.classList.add('hide');
  resultArea.classList.add('hide');
  questionArea.classList.remove('hide');
  feedback.classList.add('hide');

  instantCheck.checked = true;
  saveState();
  render();
}

function continueFromSaved(){
  const k = simSelect.value;
  const st = loadState(k);
  if(!st) return;

  simKey = st.simKey;
  questions = DB[simKey].slice();
  idx = Math.max(0, Math.min(st.idx || 0, questions.length-1));
  mode = st.mode || "treino";
  modeSelect.value = mode;

  instantCheck.checked = (st.instant !== false);
  answered = new Map((st.answered || []).map(([n,v]) => [parseInt(n,10), v]));

  emptyArea.classList.add('hide');
  resultArea.classList.add('hide');
  questionArea.classList.remove('hide');
  feedback.classList.add('hide');

  render();
  updateSaveStatus();
}

function checkCurrent(){
  if(mode === "simulado") return;

  const q=questions[idx];
  const marked=getMarked();
  if(!marked){
    feedback.classList.remove('hide');
    feedback.classList.remove('good','bad');
    feedback.innerHTML = `<span class="bad">Selecione</span> Certo (C) ou Errado (E) antes de corrigir.`;
    return;
  }

  answered.set(q.n, {marked, checked: true});
  updateMeta();
  setButtons();
  showFeedback();
  saveState();
}

function onAnswerChange(){
  if(!simKey) return;
  const q=questions[idx];
  const marked=getMarked();
  if(!marked) return;

  if(mode === "simulado"){
    answered.set(q.n, {marked, checked: false});
    updateMeta();
    saveState();
    return;
  }

  answered.set(q.n, {marked, checked: false}); // requires re-check
  feedback.classList.add('hide');
  updateMeta();
  setButtons();
  saveState();
}

function next(){
  if(idx === questions.length-1){
    finish();
    return;
  }
  idx += 1;
  feedback.classList.add('hide');
  render();
  saveState();
}

function finish(){
  questionArea.classList.add('hide');
  resultArea.classList.remove('hide');

  const total = questions.length;
  const correct = getCorrectCount();
  const pct = Math.round((correct/total)*100);

  finalBox.classList.remove('good','bad');
  finalBox.classList.add(pct >= 70 ? 'good' : 'bad');
  finalBox.innerHTML = `
    <div><b>${simKey}</b> ‚Äî modo <b>${mode === "treino" ? "Treino" : "Simulado"}</b></div>
    <div style="margin-top:6px;">Acertos: <b>${correct}</b> de <b>${total}</b> ‚Äî <b>${pct}%</b></div>
    <div class="mini" style="margin-top:6px;">Clique em uma quest√£o abaixo para revisar.</div>
  `;

  wrongList.innerHTML = "";
  blankList.innerHTML = "";

  const wrong = [];
  const blank = [];
  for(const q of questions){
    const rec = answered.get(q.n);
    if(!rec || !rec.marked){ blank.push(q.n); continue; }
    if(rec.marked !== q.a) wrong.push(q.n);
  }

  function makeChip(n, container){
    const b=document.createElement('button');
    b.className="chip";
    b.textContent = `Revisar ${n}`;
    b.onclick=()=>review(n);
    container.appendChild(b);
  }

  if(wrong.length===0){
    const d=document.createElement('div'); d.className="mini";
    d.textContent="Nenhuma errada.";
    wrongList.appendChild(d);
  } else wrong.forEach(n=>makeChip(n, wrongList));

  if(blank.length===0){
    const d=document.createElement('div'); d.className="mini";
    d.textContent="Nenhuma em branco.";
    blankList.appendChild(d);
  } else blank.forEach(n=>makeChip(n, blankList));

  saveState();
}

function review(n){
  const pos = questions.findIndex(q=>q.n===n);
  if(pos<0) return;
  idx = pos;
  resultArea.classList.add('hide');
  questionArea.classList.remove('hide');
  render();
  saveState();
}

function restart(){
  if(simKey){
    localStorage.removeItem(storageKey(simKey));
  }
  startFresh();
  updateSaveStatus();
}

function syncMode(){
  mode = modeSelect.value;
  setButtons();
  showFeedback();
  saveState();
}

startBtn.addEventListener('click', startFresh);
continueBtn.addEventListener('click', continueFromSaved);
checkBtn.addEventListener('click', checkCurrent);
nextBtn.addEventListener('click', next);
finishBtn.addEventListener('click', finish);
restartBtn.addEventListener('click', restart);

modeSelect.addEventListener('change', syncMode);
instantCheck.addEventListener('change', ()=>{ setButtons(); saveState(); });

document.querySelectorAll('input[name="ans"]').forEach(r=>{
  r.addEventListener('change', onAnswerChange);
});

simSelect.addEventListener('change', updateSaveStatus);

updateSaveStatus();
updateMeta();
</script>
</body>
</html>
